---
title: 4-3.日志文件
createTime: 2025/06/23 15:33:00
permalink: /notes/HMSpringBoot/gjucvh8n/
---
本节主要讲解如何将日志信息记录到文件中，以便于后期的维护和查阅。重点在于日志文件的配置，特别是如何实现每日记录和限制单个日志文件的大小。

## 1. 日志文件记录

日志信息不仅仅显示在控制台上，更重要的是将其记录到文件中。通过配置日志文件，可以方便后期维护和问题排查。针对不同的应用场景，可以采取不同的日志记录策略，例如每日记录、分类记录、报警后记录等。

最基本的日志文件记录方式，只需设置日志文件名即可：

```YAML
logging:
  file:
    name: server.log
```

上述配置会将所有日志信息记录到 `server.log` 文件中。

## 2. 日志文件常用配置

在实际的线上环境中，通常需要更加精细的日志管理策略。例如，每天生成一个新的日志文件，并且限制每个日志文件的大小，以便于维护和管理。

下面给出一种基于 logback 日志技术的常用配置方式，用于实现每日日志文件的记录，并限制单个日志文件的大小：

```YAML
logging:
  logback:
    rollingpolicy:
      max-file-size: 3KB
      file-name-pattern: server.%d{yyyy-MM-dd}.%i.log
```

**代码解释：**

*   `max-file-size: 3KB`：该配置定义了单个日志文件的最大容量为 3KB。当日志文件达到 3KB 时，logback 会自动将日志转存到新的文件中。
*   `file-name-pattern: server.%d{yyyy-MM-dd}.%i.log`：该配置定义了日志文件的命名规则。
    *   `server.`：日志文件名的前缀。
    *   `%d{yyyy-MM-dd}`：表示日期，logback 会根据当前的日期自动生成日期部分的字符串，例如 `2023-11-15`。
    *   `.%i`：表示一个递增的变量，用于区分同一天内的不同日志文件。当日志文件达到 `max-file-size` 指定的大小时，`%i` 的值会自动递增，从而生成新的日志文件。
    *   `.log`：日志文件的后缀名。

通过以上配置，可以实现每日生成新的日志文件，并且限制单个日志文件的大小，从而方便日志文件的管理和维护。
