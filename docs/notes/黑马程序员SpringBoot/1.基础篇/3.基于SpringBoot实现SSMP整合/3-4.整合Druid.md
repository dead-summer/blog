---
title: 3-4.整合Druid
createTime: 2025/07/15 23:02:20
permalink: /notes/HMSpringBoot/u2cprwhw/
---
## 1. SpringBoot 默认数据源

在没有手动指定数据源的情况下，SpringBoot 会自动选择一个默认的数据源。通常情况下，这个默认的数据源是 HikariCP。可以通过启动日志来确认当前使用的数据源。

例如，在运行日志中，可以看到如下 HikariCP 的相关信息：

```text
2021-11-29 09:39:15.202  INFO 12260 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-11-29 09:39:15.208  WARN 12260 --- [           main] com.zaxxer.hikari.util.DriverDataSource  : Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2021-11-29 09:39:15.551  INFO 12260 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
```

## 2. 切换数据源为 Druid (方式一：通用配置)

如果想要更换数据源，例如从 HikariCP 切换到 Druid，可以通过以下步骤实现：

### **步骤 1：导入 Druid 依赖**

```xml
<dependencies>
	<dependency>
		<groupId>com.alibaba</groupId>
		<artifactId>druid</artifactId>
		<version>1.1.16</version>
	</dependency>
</dependencies>
```

**注意：** 这里导入的是 `druid` 依赖，而不是 `druid-spring-boot-starter`。

### **步骤 2：修改 SpringBoot 配置，指定数据源类型**

```yaml
spring:
  datasource:
	driver-class-name: com.mysql.cj.jdbc.Driver
	url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC
	username: root
	password: root
	type: com.alibaba.druid.pool.DruidDataSource
```

在 `spring.datasource` 下增加 `type` 属性，指定使用 `com.alibaba.druid.pool.DruidDataSource` 作为数据源。

## 3. 切换数据源为 Druid (方式二：专用配置)

上述配置方式是一种通用的配置方式，适用于大多数数据源。但是，如果需要对数据源进行个性化配置（例如配置连接池大小、监控参数等），则需要使用数据源专用的配置格式。

### **步骤 1：导入 Druid Spring Boot Starter 依赖**

```xml
<dependencies>
	<dependency>
		<groupId>com.alibaba</groupId>
		<artifactId>druid-spring-boot-starter</artifactId>
		<version>1.2.6</version>
	</dependency>
</dependencies>
```

**注意：** 这里导入的是 `druid-spring-boot-starter`，它提供了 Druid 相关的自动配置和扩展功能。

### **步骤 2：修改 SpringBoot 配置，使用 Druid 专用配置**

```yaml
spring:
  datasource:
	druid:
	  driver-class-name: com.mysql.cj.jdbc.Driver
	  url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC
	  username: root
	  password: root
```

可以看到，在 `spring.datasource` 下增加了一个 `druid` 节点，所有的 Druid 相关配置都放在这个节点下。
