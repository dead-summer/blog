---
title: 泛型
createTime: 2025/09/03 18:26:53
permalink: /notes/interview/dz07uuhl/
---
Java 泛型是 Java 语言中一项重要的特性，于 JDK 5 引入。它允许在定义类、接口或方法时声明类型参数，这些参数在使用时由具体类型实例化。泛型机制通过类型参数化，提升了代码的灵活性和安全性。

## 泛型的概念

泛型是一种参数化类型机制，即在定义类、接口或方法时使用类型变量（如 `<T>`），这些变量在实例化时被具体类型（如 `String` 或 `Integer`）替换。

例如，定义一个泛型类 `List<T>` 后，使用时可以指定 `List<String>`，编译器会确保所有操作都基于 `String` 类型。

## 使用泛型的好处

泛型的主要优势包括类型安全和代码复用：

- **类型安全**：
	- **问题描述：** 在没有泛型之前，集合类（如 `java.util.ArrayList`）默认存储的是 `Object` 类型的元素。从集合中取出元素时，需要进行强制类型转换。这种转换在编译时无法检查，这可能导致运行时错误（如 `ClassCastException`）。
	- **解决方案：** 泛型在编译阶段对类型进行严格检查。它确保只有符合泛型声明的特定类型的对象才能被添加到集合中，从而避免了在运行时出现不必要的类型转换错误，提高了程序的健壮性。
- **代码复用**：
	泛型允许为多种数据类型编写通用逻辑，减少代码冗余。例如，一个泛型方法 `public <T> void sort(List<T> list)` 可处理任意类型的列表，无需为每种类型重写相同逻辑，显著提升代码可维护性和复用性。

## 类型擦除

类型擦除指编译器在编译阶段将泛型代码中的类型参数信息“擦除”，替换为原生类型（如 `Object` 或指定边界类型），生成的字节码中不再保留泛型类型信息。例如，泛型类 `List<T>` 在编译后等同于非泛型 `List`，所有类型参数被替换为 `Object`。泛型类型检查仅在编译阶段执行，运行时无法获取泛型信息。

##### 类型擦除的原因

Java 引入泛型时（JDK 5），面临关键兼容性问题：需确保新泛型代码能在旧版本 JVM（不支持泛型）上运行，同时允许非泛型代码（如 Java 5 前的 `ArrayList`）与泛型代码互操作。类型擦除是实现这一目标的妥协方案：

- **向后兼容性**：类型擦除使泛型代码编译后与原生代码一致，无需修改 JVM 即可在旧环境运行。
- **互操作性**：非泛型代码可直接使用泛型集合（如 `List list = new ArrayList<String>()`），编译器通过警告而非错误处理类型不匹配，确保代码库平滑过渡。

