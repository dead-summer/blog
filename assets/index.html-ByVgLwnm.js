import{a as s,c as i,b as t,o as d}from"./app-CAzY0Upz.js";const a={};function l(h,e){return d(),i("div",null,e[0]||(e[0]=[t(`<p>Redis 是一个典型的 key-value 数据库，key 一般是字符串，而 value 则包含多种不同的数据类型，包括 String、Hash、List、Set 和 SortedSet。</p><p>为了方便学习，Redis 将操作不同数据类型的命令进行了分组。可以在 <a href="https://redis.io/commands" target="_blank" rel="noopener noreferrer">Redis 官网</a> 查看不同类型的命令。不同类型的命令称为一个 group，也可以通过 <code>help</code> 命令来查看各种不同 group 的命令。</p><h2 id="_2-1-redis-通用命令" tabindex="-1"><a class="header-anchor" href="#_2-1-redis-通用命令"><span>2.1 Redis 通用命令</span></a></h2><p>通用指令是部分数据类型都可以使用的指令，常见的有：</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td><code>KEYS</code></td><td>查看符合模板的所有 key。例如，<code>KEYS *</code> 可以查看所有 key，<code>KEYS user:*</code> 可以查看所有以 &quot;user:&quot; 开头的 key。<strong>注意：</strong> 在生产环境下，当 Redis 数据库包含大量 key 时，应谨慎使用该命令，因为它会阻塞 Redis 服务器，影响其性能。建议在生产环境中使用 <code>SCAN</code> 命令代替。</td></tr><tr><td><code>DEL</code></td><td>删除一个指定的 key。例如，<code>DEL user:1</code> 可以删除 key 为 &quot;user:1&quot; 的数据。</td></tr><tr><td><code>EXISTS</code></td><td>判断 key 是否存在。例如，<code>EXISTS user:1</code> 可以判断 key 为 &quot;user:1&quot; 的数据是否存在。</td></tr><tr><td><code>EXPIRE</code></td><td>给一个 key 设置有效期，有效期到期时该 key 会被自动删除。例如，<code>EXPIRE user:1 60</code> 可以设置 key 为 &quot;user:1&quot; 的数据在 60 秒后过期。</td></tr><tr><td><code>TTL</code></td><td>查看一个 KEY 的剩余有效期。如果返回 -1，表示该 key 永不过期；如果返回 -2，表示该 key 不存在。</td></tr></tbody></table><p>可以通过 <code>help [command]</code> 查看一个命令的具体用法，例如：</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-sh"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看 keys 命令的帮助信息：</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">127.0.0.1:6379</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">help</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> keys</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">KEYS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pattern</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">summary:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Find</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> keys</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matching</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> given</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pattern</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">since:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1.0.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">group:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> generic</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-2-string-类型" tabindex="-1"><a class="header-anchor" href="#_2-2-string-类型"><span>2.2 String 类型</span></a></h2><p>String 类型是 Redis 中最简单的存储类型。其 value 是字符串，不过根据字符串的格式不同，又可以分为 3 类：</p><ul><li>string：普通字符串。例如，<code>&quot;hello&quot;</code>。</li><li>int：整数类型，可以做自增、自减操作。例如，<code>&quot;123&quot;</code>。</li><li>float：浮点类型，可以做自增、自减操作。例如，<code>&quot;3.14&quot;</code>。</li></ul><p>不管是哪种格式，底层都是字节数组形式存储，只不过是编码方式不同。字符串类型的最大空间不能超过 512MB。</p><h3 id="_2-2-1-string-的常见命令" tabindex="-1"><a class="header-anchor" href="#_2-2-1-string-的常见命令"><span>2.2.1 String 的常见命令</span></a></h3><p>String 的常见命令有：</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td><code>SET key value</code></td><td>添加或者修改已经存在的一个 String 类型的键值对。例如，<code>SET name &quot;Jack&quot;</code>。</td></tr><tr><td><code>GET key</code></td><td>根据 key 获取 String 类型的 value。例如，<code>GET name</code>。</td></tr><tr><td><code>MSET key value [key value ...]</code></td><td>批量添加多个 String 类型的键值对。例如，<code>MSET name &quot;Jack&quot; age &quot;20&quot;</code>。</td></tr><tr><td><code>MGET key [key ...]</code></td><td>根据多个 key 获取多个 String 类型的 value。例如，<code>MGET name age</code>。</td></tr><tr><td><code>INCR key</code></td><td>让一个整型的 key 自增 1。例如，如果 <code>num</code> 的值为 <code>&quot;1&quot;</code>，执行 <code>INCR num</code> 后，<code>num</code> 的值为 <code>&quot;2&quot;</code>。</td></tr><tr><td><code>INCRBY key increment</code></td><td>让一个整型的 key 自增并指定步长。例如，<code>INCRBY num 2</code> 让 <code>num</code> 值自增 2。</td></tr><tr><td><code>INCRBYFLOAT key increment</code></td><td>让一个浮点类型的数字自增并指定步长。例如，<code>INCRBYFLOAT pi 0.1</code> 让 <code>pi</code> 值自增 0.1。</td></tr><tr><td><code>SETNX key value</code></td><td>添加一个 String 类型的键值对，前提是这个 key 不存在，否则不执行。NX 是 &quot;Not Exist&quot; 的缩写。</td></tr><tr><td><code>SETEX key seconds value</code></td><td>添加一个 String 类型的键值对，并且指定有效期。EX 是 &quot;Expire&quot; 的缩写。例如，<code>SETEX code 60 &quot;123456&quot;</code> 可以设置 key 为 &quot;code&quot; 的数据在 60 秒后过期。</td></tr></tbody></table><h3 id="_2-2-2-key-结构" tabindex="-1"><a class="header-anchor" href="#_2-2-2-key-结构"><span>2.2.2 Key 结构</span></a></h3><p>Redis 没有类似 MySQL 中的 Table 的概念，那么如何区分不同类型的 key 呢？</p><p>例如，需要存储用户、商品信息到 Redis，有一个用户 id 是 1，有一个商品 id 恰好也是 1，此时如果使用 id 作为 key，就会冲突。</p><p>可以通过给 key 添加前缀加以区分，不过这个前缀不是随便加的，有一定的规范：</p><p>Redis 的 key 允许有多个单词形成层级结构，多个单词之间用 <code>:</code> 隔开，格式如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>项目名:业务名:类型:id</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个格式并非固定，也可以根据自己的需求来删除或添加词条。这样一来，就可以把不同类型的数据区分开了，从而避免了 key 的冲突问题。</p><p>例如项目名称叫 heima，有 user 和 product 两种不同类型的数据，可以这样定义 key：</p><ul><li>user 相关的 key：<code>heima:user:1</code></li><li>product 相关的 key：<code>heima:product:1</code></li></ul><p>如果 Value 是一个 Java 对象，例如一个 User 对象，则可以将对象序列化为 JSON 字符串后存储：</p><table><thead><tr><th>KEY</th><th>VALUE</th></tr></thead><tbody><tr><td><code>heima:user:1</code></td><td><code>{&quot;id&quot;:1, &quot;name&quot;: &quot;Jack&quot;, &quot;age&quot;: 21}</code></td></tr><tr><td><code>heima:product:1</code></td><td><code>{&quot;id&quot;:1, &quot;name&quot;: &quot;小米11&quot;, &quot;price&quot;: 4999}</code></td></tr></tbody></table><h2 id="_2-3-hash-类型" tabindex="-1"><a class="header-anchor" href="#_2-3-hash-类型"><span>2.3 Hash 类型</span></a></h2><p>Hash 类型，也叫散列，其 value 是一个无序字典，类似于 Java 中的 HashMap 结构。</p><p>String 结构是将对象序列化为 JSON 字符串后存储，当需要修改对象某个字段时很不方便。String 类型需要先取出整个 JSON 字符串，修改后再存入，而 Hash 类型可以直接修改某个字段。</p><p>Hash 结构可以将对象中的每个字段独立存储，可以针对单个字段做 CRUD。</p><p>Hash 的常见命令有：</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td><code>HSET key field value</code></td><td>添加或者修改 hash 类型 key 的 field 的值。例如，<code>HSET user:1 name &quot;Jack&quot;</code>。</td></tr><tr><td><code>HGET key field</code></td><td>获取一个 hash 类型 key 的 field 的值。例如，<code>HGET user:1 name</code>。</td></tr><tr><td><code>HMSET key field value [field value ...]</code></td><td>批量添加多个 hash 类型 key 的 field 的值。例如，<code>HMSET user:1 name &quot;Jack&quot; age &quot;20&quot;</code>。</td></tr><tr><td><code>HMGET key field [field ...]</code></td><td>批量获取多个 hash 类型 key 的 field 的值。例如，<code>HMGET user:1 name age</code>。</td></tr><tr><td><code>HGETALL key</code></td><td>获取一个 hash 类型的 key 中的所有的 field 和 value。</td></tr><tr><td><code>HKEYS key</code></td><td>获取一个 hash 类型的 key 中的所有的 field。</td></tr><tr><td><code>HINCRBY key field increment</code></td><td>让一个 hash 类型 key 的字段值自增并指定步长。例如，<code>HINCRBY user:1 age 2</code> 让 <code>user:1</code> 的 <code>age</code> 字段值自增 2。</td></tr><tr><td><code>HSETNX key field value</code></td><td>添加一个 hash 类型的 key 的 field 值，前提是这个 field 不存在，否则不执行。</td></tr></tbody></table><h2 id="_2-4-list-类型" tabindex="-1"><a class="header-anchor" href="#_2-4-list-类型"><span>2.4 List 类型</span></a></h2><p>Redis 中的 List 类型与 Java 中的 LinkedList 类似，可以看做是一个双向链表结构，既可以支持正向检索，也可以支持反向检索。</p><p>特征也与 LinkedList 类似：</p><ul><li>有序</li><li>元素可以重复</li><li>插入和删除快</li><li>查询速度一般</li></ul><p>常用来存储一个有序数据，例如：朋友圈点赞列表，评论列表等。</p><p>List 的常见命令有：</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td><code>LPUSH key element [element ...]</code></td><td>向列表左侧插入一个或多个元素。例如，<code>LPUSH mylist &quot;a&quot; &quot;b&quot; &quot;c&quot;</code>，列表中的元素顺序为 <code>&quot;c&quot; &quot;b&quot; &quot;a&quot;</code>。</td></tr><tr><td><code>LPOP key</code></td><td>移除并返回列表左侧的第一个元素，没有则返回 <code>null</code>。</td></tr><tr><td><code>RPUSH key element [element ...]</code></td><td>向列表右侧插入一个或多个元素。例如，<code>RPUSH mylist &quot;a&quot; &quot;b&quot; &quot;c&quot;</code>，列表中的元素顺序为 <code>&quot;a&quot; &quot;b&quot; &quot;c&quot;</code>。</td></tr><tr><td><code>RPOP key</code></td><td>移除并返回列表右侧的第一个元素，没有则返回 <code>null</code>。</td></tr><tr><td><code>LRANGE key start end</code></td><td>返回一段角标范围内的所有元素。例如，<code>LRANGE mylist 0 2</code> 返回列表中索引 0 到 2 的元素。<strong>注意： start 和 end 都是从 0 开始计数，包括 start 和 end 对应的元素, 可以为负数，-1 表示最后一个元素，-2 表示倒数第二个元素。</strong></td></tr><tr><td><code>BLPOP key [key ...] timeout</code></td><td>与 <code>LPOP</code> 类似，只不过在没有元素时等待指定时间，而不是直接返回 <code>null</code>。<code>timeout</code> 参数指定等待的秒数。<strong>当多个 key 都为空时，等待时间最长的 key 会优先被返回</strong>。</td></tr><tr><td><code>BRPOP key [key ...] timeout</code></td><td>与 <code>RPOP</code> 类似，只不过在没有元素时等待指定时间，而不是直接返回 <code>null</code>。<code>timeout</code> 参数指定等待的秒数。<strong>当多个 key 都为空时，等待时间最长的 key 会优先被返回</strong>。</td></tr></tbody></table><h2 id="_2-5-set-类型" tabindex="-1"><a class="header-anchor" href="#_2-5-set-类型"><span>2.5 Set 类型</span></a></h2><p>Redis 的 Set 结构与 Java 中的 HashSet 类似，可以看做是一个 value 为 null 的 HashMap。因为也是一个 hash 表，因此具备与 HashSet 类似的特征：</p><ul><li>无序</li><li>元素不可重复</li><li>查找快</li><li>支持交集、并集、差集等功能</li></ul><p>Set 的常见命令有：</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td><code>SADD key member [member ...]</code></td><td>向 set 中添加一个或多个元素。例如，<code>SADD myset &quot;a&quot; &quot;b&quot; &quot;c&quot;</code>。</td></tr><tr><td><code>SREM key member [member ...]</code></td><td>移除 set 中的指定元素。例如，<code>SREM myset &quot;a&quot;</code>。</td></tr><tr><td><code>SCARD key</code></td><td>返回 set 中元素的个数。</td></tr><tr><td><code>SISMEMBER key member</code></td><td>判断一个元素是否存在于 set 中。例如，<code>SISMEMBER myset &quot;a&quot;</code>。</td></tr><tr><td><code>SMEMBERS key</code></td><td>获取 set 中的所有元素。</td></tr><tr><td><code>SINTER key1 key2 [key ...]</code></td><td>求 key1 与 key2 的交集。</td></tr><tr><td><code>SDIFF key1 key2 [key ...]</code></td><td>求 key1 与 key2 的差集。</td></tr><tr><td><code>SUNION key1 key2 [key ...]</code></td><td>求 key1 与 key2 的并集。</td></tr></tbody></table><p><strong>练习题：</strong></p><ol><li><p>将下列数据用 Redis 的 Set 集合来存储：</p><ul><li>张三的好友有：李四、王五、赵六</li><li>李四的好友有：王五、麻子、二狗</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SADD</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:zhangsan</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lisi</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wangwu</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> zhaoliu</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SADD</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:lisi</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wangwu</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mazi</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ergou</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>利用 Set 的命令实现下列功能：</p><ul><li>计算张三的好友有几人</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SCARD</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:zhangsan</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>计算张三和李四有哪些共同好友</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SINTER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:zhangsan</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:lisi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>查询哪些人是张三的好友却不是李四的好友</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SDIFF</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:zhangsan</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:lisi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>查询张三和李四的好友总共有哪些人</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SUNION</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:zhangsan</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:lisi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>判断李四是否是张三的好友</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SISMEMBER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:zhangsan</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lisi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>判断张三是否是李四的好友</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SISMEMBER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:lisi</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> zhangsan</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>将李四从张三的好友列表中移除</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SREM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user:zhangsan</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lisi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h2 id="_2-6-sortedset-类型" tabindex="-1"><a class="header-anchor" href="#_2-6-sortedset-类型"><span>2.6 SortedSet 类型</span></a></h2><p>Redis 的 SortedSet 是一个可排序的 set 集合，与 Java 中的 TreeSet 有些类似，但底层数据结构却差别很大。SortedSet 中的每一个元素都带有一个 score 属性，可以基于 score 属性对元素排序，底层的实现是一个跳表（SkipList）加 hash 表。</p><p>SortedSet 具备下列特性：</p><ul><li>可排序</li><li>元素不重复</li><li>查询速度快</li></ul><p>因为 SortedSet 的可排序特性，经常被用来实现排行榜这样的功能。</p><p>SortedSet 的常见命令有：</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td><code>ZADD key score member [score member ...]</code></td><td>添加一个或多个元素到 sorted set，如果已经存在则更新其 score 值。例如，<code>ZADD myzset 1 &quot;a&quot; 2 &quot;b&quot; 3 &quot;c&quot;</code>。</td></tr><tr><td><code>ZREM key member [member ...]</code></td><td>删除 sorted set 中的一个指定元素。例如，<code>ZREM myzset &quot;a&quot;</code>。</td></tr><tr><td><code>ZSCORE key member</code></td><td>获取 sorted set 中的指定元素的 score 值。例如，<code>ZSCORE myzset &quot;b&quot;</code>。</td></tr><tr><td><code>ZRANK key member</code></td><td>获取 sorted set 中的指定元素的排名（升序）。例如，<code>ZRANK myzset &quot;b&quot;</code>。 排名从 0 开始。</td></tr><tr><td><code>ZREVRANK key member</code></td><td>获取 sorted set 中的指定元素的排名（降序）。排名从 0 开始。</td></tr><tr><td><code>ZCARD key</code></td><td>获取 sorted set 中的元素个数。</td></tr><tr><td><code>ZCOUNT key min max</code></td><td>统计 score 值在给定范围内的所有元素的个数。例如，<code>ZCOUNT myzset 1 3</code>。 <strong>注意：min 和 max 默认包含在范围内，可以使用 <code>(min</code> 和 <code>(max</code> 来表示不包含。 例如：<code>ZCOUNT myzset (1 (3</code> 表示 1 &lt; score &lt; 3</strong></td></tr><tr><td><code>ZINCRBY key increment member</code></td><td>让 sorted set 中的指定元素自增，步长为指定的 increment 值。例如，<code>ZINCRBY myzset 2 &quot;b&quot;</code> 让 <code>myzset</code> 中 <code>b</code> 的 score 值自增 2。</td></tr><tr><td><code>ZRANGE key start end</code></td><td>按照 score 排序后，获取指定排名范围内的元素（升序）。例如，<code>ZRANGE myzset 0 2</code> 返回排名 0 到 2 的元素。<strong>和 LRANGE 一样，start 和 end 都是从 0 开始，且包含 start 和 end。 也能使用负数， -1 表示最后一个元素</strong></td></tr><tr><td><code>ZREVRANGE key start end</code></td><td>按照 score 排序后，获取指定排名范围内的元素（降序）。例如，<code>ZREVRANGE myzset 0 2</code> 返回排名最高的 3 个元素（如果 myzset 中至少有 3 个元素）。 <strong>start 和 end 都是从 0 开始，且包含 start 和 end。也能使用负数， -1 表示最后一个元素</strong></td></tr><tr><td><code>ZRANGEBYSCORE key min max</code></td><td>按照 score 排序后，获取指定 score 范围内的元素（升序）。例如，<code>ZRANGEBYSCORE myzset 1 3</code> 返回 score 在 1 到 3 之间的元素。 <strong>可以使用 <code>(min</code> 和 <code>(max</code> 来表示不包含。 例如：<code>ZRANGEBYSCORE myzset (1 (3</code> 表示 1 &lt; score &lt; 3</strong></td></tr><tr><td><code>ZREVRANGEBYSCORE key max min</code></td><td>按照 score 排序后，获取指定 score 范围内的元素（降序）。例如， <code>ZREVRANGEBYSCORE myzset 3 1</code> 返回 score 在 3 到 1 之间的元素。<strong>可以使用 <code>(min</code> 和 <code>(max</code> 来表示不包含。 例如：<code>ZREVRANGEBYSCORE myzset (3 (1</code> 表示 3 &gt; score &gt; 1</strong></td></tr><tr><td><code>ZDIFF key [key ...]</code></td><td>求差集。 从第一个 key 中删除所有其他 key 中的元素。返回结果，但不会更改任何集合。</td></tr><tr><td><code>ZINTER key [key ...]</code></td><td>求交集。</td></tr><tr><td><code>ZUNION key [key ...]</code></td><td>求并集。</td></tr></tbody></table><p>注意：所有的排名默认都是升序，如果要降序则在命令的 Z 后面添加 REV 即可。</p><p><strong>练习题：</strong></p><ol><li><p>将班级的下列学生得分存入 Redis 的 SortedSet 中：</p><ul><li>Jack 85, Lucy 89, Rose 82, Tom 95, Jerry 78, Amy 92, Miles 76</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ZADD</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scores</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 85</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jack</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 89</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Lucy</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 82</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Rose</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 95</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tom</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 78</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jerry</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 92</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Amy</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 76</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Miles</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>利用 SortedSet 的命令实现下列功能：并实现下列功能：</p><ul><li>删除 Tom 同学</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ZREM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scores</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tom</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>获取 Amy 同学的分数</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ZSCORE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scores</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Amy</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>获取 Rose 同学的排名</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ZRANK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scores</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Rose</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>查询 80 分以下有几个学生</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ZCOUNT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scores</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -inf</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 79</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>给 Amy 同学加 2 分</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ZINCRBY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scores</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Amy</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>查出成绩前 3 名的同学</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ZREVRANGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scores</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>查出成绩 80 分以下的所有同学</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ZRANGEBYSCORE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scores</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -inf</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 79</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol>`,55)]))}const n=s(a,[["render",l]]),o=JSON.parse('{"path":"/notes/HMRedis/pjp85kqg/","title":"Redis常见命令","lang":"zh-CN","frontmatter":{"title":"Redis常见命令","createTime":"2025/06/25 14:43:35","permalink":"/notes/HMRedis/pjp85kqg/"},"readingTime":{"minutes":10.89,"words":3267},"git":{"createdTime":1752578302000,"updatedTime":1756721854000,"contributors":[{"name":"dead_summer","username":"","email":"2941325451@qq.com","commits":2,"avatar":"https://gravatar.com/avatar/d7f172441d823f01ad688f425860dbe76a31ea11c9936176bbd8c14670a619f8?d=retro"}]},"filePathRelative":"notes/黑马程序员Redis/1.基础篇/2.Redis常见命令.md","headers":[]}');export{n as comp,o as data};
