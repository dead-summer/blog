import{a as s,c as a,b as n,o as e}from"./app-CAzY0Upz.js";const t={};function l(h,i){return e(),a("div",null,i[0]||(i[0]=[n(`<p>在之前的配置中，我们提到了超时时间 <code>timeout</code> 的设置，例如：</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">servers</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  ip-address</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 192.168.0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2345</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  timeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> -1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 <code>timeout</code> 描述了服务器操作的超时时间，当前值为 -1 表示永不超时。然而，对于超时时间单位的理解可能存在偏差，例如，配置超时时间为 240，这个 240 究竟是秒还是分钟？如果是在线服务器主从备份，4 分钟的超时时间可能不足以完成压缩和拷贝过程。为了解决这种潜在的误解，Spring Boot 充分利用了 JDK 8 中提供的全新的计量单位数据类型。</p><p>具体来说，我们可以在配置类中使用 <code>Duration</code> 和 <code>DataSize</code> 这两个 JDK 8 新增的类，并结合 <code>@DurationUnit</code> 和 <code>@DataSizeUnit</code> 注解来明确指定时间单位和数据大小单位，从而从根本上解决信息不对称的问题。例如：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">@</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Component</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">@</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Data</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">@</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">ConfigurationProperties</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">prefix</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">servers</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> ServerConfig</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    @</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">DurationUnit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ChronoUnit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">HOURS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    private</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Duration</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> serverTimeOut</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    @</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">DataSizeUnit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">DataUnit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">MEGABYTES</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    private</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> DataSize</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> dataSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>Duration</strong>：表示时间间隔，可以通过 <code>@DurationUnit</code> 注解描述时间单位，例如上述代码中描述的单位为小时 (<code>ChronoUnit.HOURS</code>)。</li><li><strong>DataSize</strong>：表示存储空间，可以通过 <code>@DataSizeUnit</code> 注解描述存储空间单位，例如上述代码中描述的单位为 MB (<code>DataUnit.MEGABYTES</code>)。</li></ul><p>使用上述两个单位可以有效避免因沟通不同步或文档不健全导致的信息不对称问题，从根本上解决了问题，避免产生误读。</p><p>通过使用 <code>Duration</code> 和 <code>DataSize</code>，我们可以确保配置的含义清晰明确，避免因单位不明确而导致的问题。这在涉及服务器操作超时时间、数据大小限制等配置时尤为重要。</p>`,8)]))}const p=s(t,[["render",l]]),d=JSON.parse('{"path":"/notes/HMSpringBoot/2dj8d4uz/","title":"2-3.常用计量单位绑定","lang":"zh-CN","frontmatter":{"title":"2-3.常用计量单位绑定","createTime":"2025/06/24 15:06:03","permalink":"/notes/HMSpringBoot/2dj8d4uz/"},"readingTime":{"minutes":1.53,"words":460},"git":{"createdTime":1752578290000,"updatedTime":1752578290000,"contributors":[{"name":"dead_summer","username":"","email":"2941325451@qq.com","commits":1,"avatar":"https://gravatar.com/avatar/d7f172441d823f01ad688f425860dbe76a31ea11c9936176bbd8c14670a619f8?d=retro"}]},"filePathRelative":"notes/黑马程序员SpringBoot/3.开发实用篇/2.配置高级/2-3.常用计量单位绑定.md","headers":[]}');export{p as comp,d as data};
