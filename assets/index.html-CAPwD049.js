import{a as s,c as e,b as a,o as l}from"./app-CAzY0Upz.js";const n={};function d(t,i){return l(),e("div",null,i[0]||(i[0]=[a(`<p>本节主要讲解如何将日志信息记录到文件中，以便于后期的维护和查阅。重点在于日志文件的配置，特别是如何实现每日记录和限制单个日志文件的大小。</p><h2 id="_1-日志文件记录" tabindex="-1"><a class="header-anchor" href="#_1-日志文件记录"><span>1. 日志文件记录</span></a></h2><p>日志信息不仅仅显示在控制台上，更重要的是将其记录到文件中。通过配置日志文件，可以方便后期维护和问题排查。针对不同的应用场景，可以采取不同的日志记录策略，例如每日记录、分类记录、报警后记录等。</p><p>最基本的日志文件记录方式，只需设置日志文件名即可：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">logging</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述配置会将所有日志信息记录到 <code>server.log</code> 文件中。</p><h2 id="_2-日志文件常用配置" tabindex="-1"><a class="header-anchor" href="#_2-日志文件常用配置"><span>2. 日志文件常用配置</span></a></h2><p>在实际的线上环境中，通常需要更加精细的日志管理策略。例如，每天生成一个新的日志文件，并且限制每个日志文件的大小，以便于维护和管理。</p><p>下面给出一种基于 logback 日志技术的常用配置方式，用于实现每日日志文件的记录，并限制单个日志文件的大小：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">logging</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  logback</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    rollingpolicy</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      max-file-size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 3KB</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      file-name-pattern</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server.%d{yyyy-MM-dd}.%i.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>代码解释：</strong></p><ul><li><code>max-file-size: 3KB</code>：该配置定义了单个日志文件的最大容量为 3KB。当日志文件达到 3KB 时，logback 会自动将日志转存到新的文件中。</li><li><code>file-name-pattern: server.%d{yyyy-MM-dd}.%i.log</code>：该配置定义了日志文件的命名规则。 <ul><li><code>server.</code>：日志文件名的前缀。</li><li><code>%d{yyyy-MM-dd}</code>：表示日期，logback 会根据当前的日期自动生成日期部分的字符串，例如 <code>2023-11-15</code>。</li><li><code>.%i</code>：表示一个递增的变量，用于区分同一天内的不同日志文件。当日志文件达到 <code>max-file-size</code> 指定的大小时，<code>%i</code> 的值会自动递增，从而生成新的日志文件。</li><li><code>.log</code>：日志文件的后缀名。</li></ul></li></ul><p>通过以上配置，可以实现每日生成新的日志文件，并且限制单个日志文件的大小，从而方便日志文件的管理和维护。</p>`,13)]))}const h=s(n,[["render",d]]),p=JSON.parse('{"path":"/notes/HMSpringBoot/gjucvh8n/","title":"4-3.日志文件","lang":"zh-CN","frontmatter":{"title":"4-3.日志文件","createTime":"2025/06/23 15:33:00","permalink":"/notes/HMSpringBoot/gjucvh8n/"},"readingTime":{"minutes":1.95,"words":584},"git":{"createdTime":1752578290000,"updatedTime":1752578290000,"contributors":[{"name":"dead_summer","username":"","email":"2941325451@qq.com","commits":1,"avatar":"https://gravatar.com/avatar/d7f172441d823f01ad688f425860dbe76a31ea11c9936176bbd8c14670a619f8?d=retro"}]},"filePathRelative":"notes/黑马程序员SpringBoot/2.运维实用篇/4.日志/4-3.日志文件.md","headers":[]}');export{h as comp,p as data};
